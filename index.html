<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Тест на уровень сознания</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { 
      font-family: 'Segoe UI', Arial, sans-serif; 
      max-width: 800px; 
      margin: 0 auto; 
      background: #f6f8fa; 
      padding: 2.5em 0 2em;
    }
    h1 {
      color: #333b65; 
      margin-bottom: 0.4em;
      letter-spacing: 0.04em;
      font-size: 2.5rem;
      text-align: center;
    }
    .desc-block {
      background: linear-gradient(90deg,#e3f0ff 0%,#d7ffe8 100%);
      border-radius: 16px;
      box-shadow: 0 7px 32px #19197011;
      margin-bottom: 2.2em;
      padding: 2.0em 2.2em 1.5em 2.2em;
      text-align: center;
    }
    .desc-block h2 {
      margin-top: 0;
      color: #016872;
      letter-spacing: 0.02em;
      font-size: 1.44em;
    }
    .desc-block p {
      color: #2b3045; font-size: 1.12em;
      margin-top: 0.7em;
    }
    .consciousness-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      margin: 1.6em 0 0.5em 0;
      gap: 6px 21px;
      padding-left: 0;
      list-style: none;
      font-size: 0.97em;
    }
    .consciousness-list li {
      flex: 0 0 calc(50% - 10px); min-width: 260px;
      background: #ffffffe9;
      border-radius: 9px;
      box-shadow: 0 1px 6px #95ddd522;
      margin-bottom: 0.7em;
      padding: 0.7em 1.1em 0.6em 1em;
    }
    .consciousness-list strong { color: #214552; }
    .attention {
      background: #fffad1;
      color: #856404;
      border-left: 5px solid #ffe066;
      padding: 1em 1.4em 0.7em;
      border-radius: 8px;
      margin-bottom: 1.5em;
      font-size: 1em;
    }
    .question {
      background: #fff; 
      margin-bottom: 1.15em; 
      padding: 1.11em 1.6em;
      border-radius: 8px;
      box-shadow: 0 1px 8px #d8e4ef40;
      font-size: 1.05em;
    }
    .question strong { color: #025375; }
    label { 
      display: block; 
      margin-top: 0.6em;
      cursor: pointer;
      transition: color 0.2s;
    }
    input[type="radio"]:checked + span { 
      font-weight: bold; 
      color: #1583c7 !important;
    }
    button {
      background: linear-gradient(90deg,#256e83 0%,#5880ff 100%);
      color: #fff;
      border: none;
      border-radius: 5px;
      padding: 1em 1.8em;
      font-size: 1.13em;
      font-weight: 600;
      margin: 2em 0;
      letter-spacing: 0.04em;
      box-shadow: 0 3px 14px #95bad5b7;
      cursor: pointer;
      transition: background .22s;
    }
    button:disabled { opacity: 0.75; }
    .results {
      background: #e8eaf6; 
      margin-top: 2em; 
      padding: 2em 2em 1.2em;
      border-radius: 12px;
      box-shadow: 0 0px 18px #aacbd633;
    }
    .results .level {
      font-size: 1.3em; font-weight: 700; color: #25536b;
      margin-bottom: .7em; margin-top: -.8em;
    }
    .desc { font-size: 1.06em; color: #363d45; margin-bottom: 1.4em;}
    .download { margin-top: 2em;}
    hr {margin:2.5em 0 1.7em 0;}
  </style>
</head>
<body>
  <h1>Тест: Ваш уровень сознания</h1>
  <div class="desc-block">
    <h2>Для чего нужен этот тест?</h2>
    <p>
      <strong>
        Этот тест — авторский инструмент глубокого самопознания, построенный на синтезе идей&nbsp;Болговых, Хокинса, Барретта и Маслоу.<br>
        Вы сможете узнать на каком уровне сознания вы находитесь, а также получить индивидуальную характеристику именно вашего пути.
      </strong>
    </p>
    <p>
      Тест покажет, как вы принимаете решения, раскрывает ваши приоритеты и внутренние мотивации. Он дает понимание, в чем ваши ресурсы и вызовы на пути роста.<br>
      Всего 8 уровней сознания:
    </p>
    <ul class="consciousness-list">
      <li><strong>1. Спящий —</strong> Нет интереса к самопознанию</li>
      <li><strong>2. Борец —</strong> Есть слова о познании, но внутренней ясности нет</li>
      <li><strong>3. Искатель —</strong> Активный поиск причин и ограничений</li>
      <li><strong>4. Личность —</strong> Осознание себя как творца, открытие духовного мира</li>
      <li><strong>5. Игрок —</strong> Исследование и проявление своих возможностей</li>
      <li><strong>6. Маг —</strong> Доступ к глубоким ресурсам личности</li>
      <li><strong>7. Творец —</strong> Творчество из глубины, понимание “Я”</li>
      <li><strong>8. Источник —</strong> Полное познание, мгновенные ответы, жизнь из сердца</li>
    </ul>
    <p style="margin-top:1.2em;color:#00696d;font-size:1em;">
      Пройдите тест до конца и получите персональный анализ, а также ссылку на скачивание результата.
    </p>
  </div>

  <div class="attention">
    <b>Как опубликовать этот тест у себя на странице:</b><br>
    <ol>
      <li>Зарегистрируйтесь или войдите на <a href="https://github.com/" target="_blank">GitHub</a>.</li>
      <li>Нажмите "New repository" → дайте имя (например <b>consciousness-test</b>), создайте репозиторий (должен быть публичный).</li>
      <li>Создайте файл <b>index.html</b>, вставьте в него этот код полностью.</li>
      <li>Нажмите "Commit new file". Откройте в настройках вкладку <b>Pages</b>, выберите ветку <b>main/master</b> и папку <b>/(root)</b>, "Save".</li>
      <li>Через минуту появится ваша ссылка справа сверху (пример: <i>https://yourusername.github.io/consciousness-test/</i>).<br>Если увидите "404: not found" — подождите пару минут и обновите страницу.</li>
    </ol>
    <div style="margin-top:1em;">
      <b>Подробные видеоруководства ищите по запросу “github pages как выложить сайт”.</b>
    </div>
  </div>
  <form id="consciousness-test"></form>
  <div id="results" class="results" style="display:none;"></div>
  <div class="download" id="download-block" style="display:none;"><a id="download-link" download="consciousness-test-result.txt">Скачать результаты</a></div>
  <script>
    // ======= Характеристики 8 уровней сознания ==========
    const LEVELS = [
      {
        title: "1. Спящий",
        desc: "Нет интереса к самопознанию, человек живет автоматически, решения принимает под давлением обстоятельств. Внутренняя мотивация не осознается. Преобладают рутинные реакции, ответственность перекладывается вовне."
      },
      {
        title: "2. Борец",
        desc: "Есть разговоры о развитии, но мало внутренней ясности. Мотивация часто во внешних целях, либо страхах. Преобладает желание бороться за изменения, но внутренний конфликт не разрешён."
      },
      {
        title: "3. Искатель",
        desc: "Активный поиск ответов, причин, источников ограничений. Человек прислушивается к себе, исследует новые практики, постепенно увеличивает осознанность."
      },
      {
        title: "4. Личность",
        desc: "Начинается осознание себя как творца, поиск своих уникальных качеств и открытие духовного слоя жизни. Человек принимает личную ответственность и строит контакт с внутренним миром."
      },
      {
        title: "5. Игрок",
        desc: "Исследование и проявление собственных возможностей. Появляется лёгкость, интерес к экспериментам, умение быть гибким и радостным в развитии."
      },
      {
        title: "6. Маг",
        desc: "Доступ к глубоким ресурсам психики, сознательный контакт с интуицией. Человек легко трансформирует состояния, способен управлять внутренним миром и проявлять силу мысли."
      },
      {
        title: "7. Творец",
        desc: "Творчество из глубины, глубокое понимание ‘Я’, выходит за рамки привычных шаблонов. Создаёт новое не из потребности, а из внутренней полноты."
      },
      {
        title: "8. Источник",
        desc: "Полное познание себя, мгновенные ответы, жизнь из сердца. Жизнь становится потоком, преобладают любовь и спокойствие, нет разделения между внутренним и внешним."
      }
    ];

    // ======= 50 вопросов с рандомизацией вариантов, 4-5 вариантов =============

    // Базовый банк вариантов для разных аспектов (каждому уровню соответствует номер индекса, 0-7)
    const OPTION_BANK = [
      // (0) Спящий
      "Делаю как все, не задумываюсь о смысле",
      // (1) Борец
      "Чаще всего борюсь за свои права, сопротивляюсь давлению",
      // (2) Искатель
      "Стараюсь понять, почему поступаю так или иначе",
      // (3) Личность
      "Ищу свои сильные стороны, работаю с собой",
      // (4) Игрок
      "Воспринимаю жизнь как эксперимент, люблю пробовать новое",
      // (5) Маг
      "Доверяю интуиции, управляю своим состоянием",
      // (6) Творец
      "Создаю новые идеи и смыслы, живу из внутренней полноты",
      // (7) Источник
      "Действую из сердца и спокойствия, ощущаю единство со всем"
    ];

    // 50 вопросов и установленные (но рандомизируемые!) варианты ответов.
    // Для простоты, массив объектов: {question: "...", options: [индексы в OPTION_BANK]}

    const QUESTIONS_RAW = [
      { question: "Когда что-то не получается, вы...", options: [0,1,2,3,4] },
      { question: "Как относитесь к переменам:", options: [0,1,2,4,5] },
      { question: "Что вам ближе в общении с людьми:", options: [0,1,3,5] },
      { question: "Как принимаете важные решения:", options: [0,2,3,5,7] },
      { question: "Ваша главная мотивация в жизни:", options: [0,1,2,6] },
      { question: "Если нужно выйти из зоны комфорта...", options: [0,1,2,4,7] },
      { question: "Ваш подход к развитию:", options: [0,2,3,4,6] },
      { question: "Если вас критикуют:", options: [0,1,2,3,7] },
      { question: "Что для вас успех:", options: [0,1,3,4,6] },
      { question: "Как реагируете на страх:", options: [0,1,2,5] },
      { question: "Что делаете для внутреннего баланса:", options: [0,2,4,5,6] },
      { question: "Кого вините при проблемах:", options: [0,1,2,3] },
      { question: "Как вы относитесь к своей уникальности:", options: [0,3,4,6,7] },
      { question: "Ваш источник вдохновения чаще всего:", options: [0,3,4,6,7] },
      { question: "Что для вас главное в работе:", options: [0,1,3,4,7] },
      { question: "За что вы себя уважаете:", options: [0,2,3,5] },
      { question: "Как относитесь к ошибкам:", options: [0,1,4,5,6] },
      { question: "Куда тратите энергию:", options: [0,1,2,4,5] },
      { question: "Как реагируете на чужой успех:", options: [0,1,2,3,6] },
      { question: "Что для вас означает саморазвитие:", options: [1,2,3,7] },
      { question: "Когда нужно что-то начать сначала:", options: [0,1,2,5] },
      { question: "В новом коллективе вы скорее:", options: [0,1,3,5] },
      { question: "Как реагируете на непредвиденное:", options: [0,1,2,4,7] },
      { question: "Что для вас внутренний мир:", options: [0,2,3,5,7] },
      { question: "Что даёт вам ощущение уверенности:", options: [0,3,4,6] },
      { question: "В спорной ситуации вы:", options: [0,1,2,4,6] },
      { question: "Что делаете, когда устаете:", options: [0,1,2,5] },
      { question: "Что для вас духовность:", options: [0,2,3,5,7] },
      { question: "За что вас ценят другие:", options: [0,2,3,4,6] },
      { question: "Ваш стиль мышления:", options: [0,2,4,5,6] },
      { question: "Что вас больше всего привлекает:", options: [0,1,4,6,7] },
      { question: "Как формируете цели:", options: [0,1,2,3,6] },
      { question: "Ваше отношение к случайностям:", options: [0,2,4,5,7] },
      { question: "Что поможет вам расти:", options: [0,2,3,4,7] },
      { question: "Что вас чаще сдерживает:", options: [0,1,2,5,6] },
      { question: "Как воспринимаете кризис:", options: [0,1,2,4,5] },
      { question: "Что делает вас счастливым:", options: [0,3,4,6,7] },
      { question: "Как относитесь к осмысленности жизни:", options: [0,2,5,6,7] },
      { question: "Что чаще всего определяет ваши поступки:", options: [0,1,2,3,4] },
      { question: "Что вдохновляет на перемены:", options: [0,2,4,5,6] },
      { question: "Главное качество для гармонии:", options: [0,3,4,6,7] },
      { question: "Как вы учитесь новому:", options: [0,2,3,6] },
      { question: "Что для вас истинная свобода:", options: [0,2,3,5,7] },
      { question: "Как смотрите на проблемы:", options: [0,1,3,5,6] },
      { question: "С чем чаще всего сталкиваетесь внутри себя:", options: [0,1,2,5] },
      { question: "Что первое замечаете в других:", options: [0,1,2,3,7] },
      { question: "Куда стремится ваше внимание:", options: [0,3,5,6,7] },
      { question: "Как реагируете на разочарование:", options: [0,1,2,4] },
      { question: "Где черпаете силы:", options: [0,2,4,5,7] },
      { question: "Что для вас настоящее обновление:", options: [0,2,4,6,7] }
    ];

    // Функция для перемешивания массива
    function shuffle(arr) {
      let n = arr.length;
      for(let i=n-1;i>0;--i){
        let j = Math.floor(Math.random()*(i+1));
        [arr[i], arr[j]]=[arr[j], arr[i]];
      }
      return arr;
    }

    // Оригинальный массив из 50 вопросов (можно добавить еще при необходимости)
    const QUESTIONS = QUESTIONS_RAW.map((qRaw, idx) => {
      // Рандомизируем порядок вариантов для каждого вопроса
      let variants = qRaw.options.slice();
      shuffle(variants);
      // От 4 до 5 вариантов
      let count = Math.floor(Math.random()*2)+4;
      if (variants.length > count) variants.length = count;
      return {
        question: qRaw.question,
        optionIdxs: variants,
      }
    });

    // ====== Генерация вариантов для отображения, соответствие value → уровень =======
    const form = document.getElementById('consciousness-test');
    QUESTIONS.forEach((q, idx) => {
      const div = document.createElement("div");
      div.className = "question";
      div.innerHTML = `<strong>Вопрос ${idx+1}:</strong><br>${q.question}`;
      shuffle(q.optionIdxs);
      q.optionIdxs.forEach((optIdx, j) => {
        const radioId = `q${idx}_opt${j}`;
        const label = document.createElement("label");
        label.htmlFor = radioId;
        label.innerHTML = `
          <input type="radio" name="q${idx}" value="${optIdx}" id="${radioId}"/>
          <span>${OPTION_BANK[optIdx]}</span>
        `;
        div.appendChild(label);
      });
      form.appendChild(div);
    });
    // Кнопка завершения
    const submitBtn = document.createElement("button");
    submitBtn.textContent = "Узнать свой уровень";
    form.appendChild(submitBtn);

    // ======= Сбор и расчет результатов ========
    form.onsubmit = function(e){
      e.preventDefault();
      let totals = [0,0,0,0,0,0,0,0];
      let answers = [];
      for(let i=0; i<QUESTIONS.length; ++i){
        let sel = form.querySelector(`input[name="q${i}"]:checked`);
        if(!sel){
          alert(`Пожалуйста, ответьте на вопрос №${i+1}`);
          return;
        }
        let val = parseInt(sel.value);
        // value соответствует уровню по OPTION_BANK
        if(val>=0 && val<=7) totals[val]++;
        // answer text for report
        answers.push({
          question: QUESTIONS[i].question, 
          answer: OPTION_BANK[val]
        });
      }
      // Определяем максимальный уровень по количеству выбранных опций
      let maxValue = Math.max(...totals);
      // Если больше одного — берем более высокий уровень из них
      let levelIdx = totals.lastIndexOf(maxValue);

      // Выдаем характеристику уровня
      const userLevel = LEVELS[levelIdx];

      // Формируем результат
      let resultHtml = `<div class="level">${userLevel.title}</div><div class="desc">${userLevel.desc}</div>`;
      resultHtml += "<hr><h3>Ваши ответы:</h3><ol>";
      answers.forEach((a, i) => {
        resultHtml += `<li><b>${a.question}</b><br><em>${a.answer}</em></li>`;
      });
      resultHtml += "</ol>";
      document.getElementById('results').style.display = '';
      document.getElementById('results').innerHTML = resultHtml;

      // Генерировать текстовый отчет
      let textResult = `Результаты теста «Уровень сознания»\n\nВаш уровень: ${userLevel.title}\n${userLevel.desc}\n\nОтветы:\n`;
      answers.forEach((a, i) => {
        textResult += `${i+1}. ${a.question}\nВаш ответ: ${a.answer}\n`;
      });

      // Ссылка на скачивание
      const dlBlock = document.getElementById('download-block');
      dlBlock.style.display = '';
      const link = document.getElementById('download-link');
      link.href = 'data:text/plain;charset=utf-8,' + encodeURIComponent(textResult);
    };
  </script>
  <hr>
  <p style="color:#255362"><b>Напоминание:</b> Чтобы сделать этот тест доступным онлайн для себя и других, следуйте простой пошаговой инструкции выше!</p>
</body>
</html>
